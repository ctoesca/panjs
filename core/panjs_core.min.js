window.MsxmlObject=null;String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};"bind"in Function.prototype||(Function.prototype.bind=function(a){var b=this;if(1>=arguments.length)return function(){return b.apply(a,arguments)};var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,0===arguments.length?c:c.concat(Array.prototype.slice.call(arguments)))}});
"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});"indexOf"in Array.prototype||(Array.prototype.indexOf=function(a,b){void 0===b&&(b=0);0>b&&(b+=this.length);0>b&&(b=0);for(var c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1});
"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);0>b&&(b+=this.length);b>this.length-1&&(b=this.length-1);for(b++;0<b--;)if(b in this&&this[b]===a)return b;return-1});"forEach"in Array.prototype||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)});
"map"in Array.prototype||(Array.prototype.map=function(a,b){for(var c=Array(this.length),d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c});"filter"in Array.prototype||(Array.prototype.filter=function(a,b){for(var c=[],d,e=0,f=this.length;e<f;e++)e in this&&a.call(b,d=this[e],e,this)&&c.push(d);return c});"every"in Array.prototype||(Array.prototype.every=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&!a.call(b,this[c],c,this))return!1;return!0});
"some"in Array.prototype||(Array.prototype.some=function(a,b){for(var c=0,d=this.length;c<d;c++)if(c in this&&a.call(b,this[c],c,this))return!0;return!1});var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,ARGUMENT_NAMES=/([^\s,]+)/g;function getParamNames(a){a=a.toString().replace(STRIP_COMMENTS,"");a=a.slice(a.indexOf("(")+1,a.indexOf(")")).match(ARGUMENT_NAMES);null===a&&(a=[]);return a}function randomBetween(a,b){return Math.floor(Math.random()*b)+a}
function getDateFromTimestamp(a,b){var c="";if(null!=a){2>arguments.length&&(b="/");var c=new Date(1E3*parseInt(a)),d=c.getFullYear(),e=c.getMonth()+1;10>e&&(e="0"+e);var f=c.getDate();10>f&&(f="0"+f);var g=c.getHours();10>g&&(g="0"+g);var h=c.getMinutes();10>h&&(h="0"+h);c=c.getSeconds();10>c&&(c="0"+c);c=d+b+e+b+f+" "+g+":"+h+":"+c}return c}
function generateUUID(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?c:c&7|8).toString(16)})}function getDocHeight(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}
function getXml(a){return a.xml?a.xml:(new XMLSerializer).serializeToString(a)}function getText(a){return"undefined"!=typeof a.text?a.text:a.textContent}
function CreateMSXMLDocumentObject(){if(null==window.MsxmlObject){if("undefined"!=typeof ActiveXObject)for(var a="Msxml2.DOMDocument.6.0 Msxml2.DOMDocument.5.0 Msxml2.DOMDocument.4.0 Msxml2.DOMDocument.3.0 MSXML2.DOMDocument MSXML.DOMDocument".split(" "),b=0;b<a.length;b++)try{return window.MsxmlObject=new ActiveXObject(a[b]),window.MsxmlObject}catch(c){}}else return window.MsxmlObject;return null}
function getXmlDocument(a){if(window.DOMParser&&(11<=panjs.iever||-1==panjs.iever)){var b=new DOMParser;try{xmlDoc=b.parseFromString(a,"text/xml")}catch(c){throw"XML parsing error.";}}else{xmlDoc=CreateMSXMLDocumentObject();if(!xmlDoc)throw"Cannot create XMLDocument object";xmlDoc.loadXML(a)}a=null;xmlDoc.parseError&&0!=xmlDoc.parseError.errorCode?a="XML Parsing Error: "+xmlDoc.parseError.reason+" at line "+xmlDoc.parseError.line+" at position "+xmlDoc.parseError.linepos:xmlDoc.documentElement?(b=
xmlDoc.getElementsByTagName("parsererror"),0<b.length&&(a=b[0].textContent)):a="XML Parsing Error!";if(a)throw a;return xmlDoc}function defined(a){if("undefined"!=typeof a&&null!=a){for(var b=a,c=1;c<arguments.length;c++)if(defined(b[arguments[c]]))b=b[arguments[c]];else return!1;return!0}return!1}function getIEVersion(){var a=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a}
function getFirefoxVersion(){var a=-1;null!=/Firefox\/([0-9]*)./.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a}function getChromeVersion(){var a=-1;null!=/Chrome\/([0-9]*)./.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a}Number.prototype.toFixed||(Number.prototype.toFixed=function(a){a=Math.pow(10,a||0);return String(Math.round(this*a)/a)});String.prototype.contains=function(a){return-1<this.indexOf(a)};
String.prototype.trim=function(){var a=this.replace(/^\s+/g,"").replace(/\s+$/g,"");return a=a.replace(/^\n+/g,"").replace(/\n+$/g,"")};String.prototype.gauche=function(a){a=this.indexOf(a,0);return 0<=a?this.substring(0,a):""};String.prototype.capitalizeFirstLetter=function(){if(0==this.length)return this;var a=this.charAt(0).toUpperCase();1<this.length&&(a+=this.substr(1));return a};
String.prototype.htmlEntities=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};String.prototype.rightOf=function(a){var b=this.indexOf(a);return-1<b?this.substring(b+a.length,this.length):""};String.prototype.droite=String.prototype.rightOf;String.prototype.droitedroite=function(a){var b=this.lastIndexOf(a);return 0<b?this.substr(b+a.length):""};String.prototype.isEmpty=function(){return""==this.trim()};
String.prototype.startsWith=function(a){return 0==this.indexOf(a)};String.prototype.endsWith=function(a){return this.lastIndexOf(a)==this.length-a.length};String.prototype.hashCode=function(){var a=0,b,c;if(0==this.length)return a;for(b=0;b<this.length;b++)c=this.charCodeAt(b),a=(a<<5)-a+c,a&=a;return a};String.prototype.removeEnd=function(a){return this.endsWith(a)?this.substring(0,this.length-a.length):this.toString()};
String.prototype.removeEndCaseInsensitive=function(a){return this.toLowerCase().lastIndexOf(a)+a.length==this.length==!0?(a=this.toLowerCase().lastIndexOf(a.toLowerCase()),this.substr(0,a)):this};Array.prototype.remove=function(a){for(i=0;i<this.length;i++)if(a==this[i]){this.splice(i,1);break}};String.prototype.nbsouschaine=function(a){for(var b=this,c=0,d=b.indexOf(a,0);-1!=d;)c++,b=b.substring(d+a.length,b.length),d=b.indexOf(a,0);return c};Array.prototype.pushArray=function(a){for(var b=0;b<a.length;b++)this.push(a[b])};
function base64encode(a){if("string"!==typeof a)return a;if("undefined"!==typeof window.btoa)return window.btoa(a);for(var b="",c,d,e,f,g,h,l=0;l<a.length;)c=a.charCodeAt(l++),d=a.charCodeAt(l++),e=a.charCodeAt(l++),f=c>>2,c=(c&3)<<4|d>>4,g=(d&15)<<2|e>>6,h=e&63,isNaN(d)?g=h=64:isNaN(e)&&(h=64),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h);return b}
function base64decode(a){if("string"!==typeof a)return a;a.replace(/[^A-Za-z0-9\+\/\=]/g,"");if("undefined"!==typeof window.atob)return window.atob(a);for(var b="",c,d,e,f,g,h=0;h<a.length;)c=map.indexOf(a.charAt(h++)),d=map.indexOf(a.charAt(h++)),f=map.indexOf(a.charAt(h++)),g=map.indexOf(a.charAt(h++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=g&&(b+=String.fromCharCode(e));return b}
function callLater(a){var b=Array.prototype.slice.call(arguments).slice(1);return setTimeout(function(){return a.apply(null,b)},50)}function delay(a,b){var c=Array.prototype.slice.call(arguments).slice(2);return setTimeout(function(){return a.apply(null,c)},b)}clone=function(a){return jQuery.extend(!0,{},a)};$.fn.getElement=function(a){a=$(a,this);if(0==a.length)return null;if(1==a.length)return a;if(1<a.length)return $(a[0])};
$.fn.getElements=function(a){a=$(a,this);var b=$([]);if(1==a.length)b.push(a);else for(var c=0;c<a.length;c++)b.push($(a[c]));return b};function isNumberKey(a){var b=a.which;a=a.shiftKey;return 96<=b&&105>=b||48<=b&&57>=b&&!0==a}function isControlKey(a){var b=a.which;a=8==b||13==b||46==b||35==b||36==b||37==b||39==b||9==b||a.ctrlKey&&(b=67)||a.ctrlKey&&(b=86)||a.ctrlKey&&(b=88);logger.debug(b+", r="+a);return a}
(function(){panjs.logger=null;panjs.root={id:"root",components:{}};panjs.loader=null;panjs.iever=getIEVersion();panjs.chromever=getChromeVersion();panjs.ffver=getFirefoxVersion();panjs.stack=[];panjs.stackLevel=0;panjs.setSourceInComponents=!1;panjs.messages={CLASSNAME_MATCHS_FILENAME:"The name of the class (%1) must match the file name %2 (case sensitive)",LESS_IE8:"less is not fully compatible with IE%1 : transform less code in css",LESS_NOT_LOADED:"LESS not loaded. Use panjs_core_with_less.min.js or load LESS (before panJs)"};
panjs.getMessage=function(a){for(var c=1;c<arguments.length;c++){var d=arguments[c];null==d&&(d="null");a=a.replace("%"+c,d)}return a};panjs.getClass=function(a){"undefined"==typeof window[a]&&uses(a);return window[a]};panjs.getInstance=function(a,c){return new (panjs.getClass(a))(c)};window.less="undefined"!=typeof panjs.less?panjs.less:{env:"production",async:!0,fileAsync:!1,poll:1E3,functions:{},dumpLineNumbers:"comments",relativeUrls:!1,rootpath:":/a.com/"};for(var a=0;a<panjs.namespaces.length;a++)"undefined"!=
typeof panjs.namespaces[a]&&(panjs.namespaces[a].path=panjs.namespaces[a].path.replace("{version}",panjs.version));panjs.createComponent=function(a,c){panjs.stackLevel++;var d=panjs.getClassNameFromClassPath(a),e=null;if("undefined"==typeof window[d]){var f=panjs.loader.usesComponent(a);if(!f.result)return uses("core.display.TerrorElement.html"),e=new TerrorElement(f),panjs.stack.push(f.message),panjs.stackLevel--,0>=panjs.stackLevel&&(panjs.stack=[],panjs.stackLevel=0),e}try{"undefined"==typeof c&&
(c={});"undefined"!=typeof c.elem&&panjs.setElementArgs(c.elem,c);if("undefined"!=typeof panjs.root.components[a]&&"undefined"!=c.reuse&&!0===c.reuse){var g=panjs.root.components[a];g.reuse(c);return g}e=new window[d](c)}catch(h){f="Error instantiating "+d+": "+h,logger.error(f),uses("core.display.TerrorElement.html"),e=panjs.getAbsoluteUrlFromClassPath(a),g=panjs.loader.getUrlWithVersion(e),e=new TerrorElement({message:h,path:e,url:g,className:d}),panjs.stack.push(f)}panjs.stackLevel--;0>=panjs.stackLevel&&
(panjs.stack=[],panjs.stackLevel=0);e._onInitialized&&e._onInitialized();return panjs.root.components[a]=e};panjs.setElementArgs=function(a,c){if("undefined"!=typeof a)for(var d=0;d<a.attributes.length;d++){var e=a.attributes.item(d),f=e.nodeName.toLowerCase(),e=e.value;f.startsWith("data-")&&(f=panjs.getFormatedArgName(f));"true"==e?e=!0:"false"==e&&(e=!1);c[f]=e}};panjs.getFormatedIdName=function(a){if(-1==a.indexOf("-"))return a;var c="";a=a.split("-");for(var d=0;d<a.length;d++)c=0==d?a[d]:c+
a[d].capitalizeFirstLetter();return c};panjs.getFormatedArgName=function(a){var c="";a=a.split("-");for(var d=1;d<a.length;d++)c=1==d?a[d]:c+a[d].capitalizeFirstLetter();return c};panjs.loadScript=function(a,c){$LAB.script(a).wait(function(){"undefined"!=typeof c&&c(a)})};panjs.load=function(a){panjs._load(a)};panjs.exec=function(a){""!=a&&("undefined"!=typeof window.execScript?window.execScript(a):window.eval(a))};panjs._load=function(a){0==arguments.length&&(a=$(document.body));var c=[];null!=a.attr("data-compo")?
c.push(a):c=a.getElements("[data-compo]");for(var d=0;d<c.length;d++){var e=c[d],f=e.attr("data-compo"),g="false"!==e.attr("autoload"),h=e.attr("id");!0==g?(f=panjs.createComponent(f,{elem:e[0]}),e.replaceWith(f.container),f.container[0].owner=f):(uses("core.display.TproxyDisplayObject"),f=new TproxyDisplayObject({sourceElement:e[0]}),f.parent=this,e[0].loaded=!1,e.hide(),e[0].setAttribute("id",panjs.root.id+"_"+h),e[0].originalId=h,e[0].owner=panjs.root);panjs.root[h]=f}logger.info("READY");"undefined"!=
typeof onReady&&onReady()};panjs.getClassNameFromClassPath=function(a){var c=".";if(a.startsWith("http://")||a.startsWith("https://")||"/"==a[0])c="/";var d=a;a.endsWith(".html")&&(d=a.removeEnd(".html"));a=d.split(c);return d=a[a.length-1]};panjs.getNamespace=function(a){for(var c=0;c<panjs.namespaces.length;c++){var d=panjs.namespaces[c];if(d.name==a)return d}return null};panjs.getAbsoluteUrlFromClassPath=function(a){var c=a.endsWith(".html"),d="";if(a.startsWith("http://")||"/"==a[0])d=c?a:a+".js";
else if(a.contains("."))for(var e=0;e<panjs.namespaces.length;e++){var f=panjs.namespaces[e];if(a.startsWith(f.name+".")){d=a.removeEnd(".html").replace(/\./g,"/");d=d.replace(f.name,f.path);d=c?d+".html":d+".js";break}}else d=a,d=c?d+".html":d+".js";if(""==d)throw"Can't resolve "+a+": verify namespaces";return d};panjs.isAbsoluteUrl=function(a){a=a.toLowerCase();return"/"==a[0]||a.toLowerCase().startsWith("http://")||a.toLowerCase().startsWith("https://")};panjs.transformUrl=function(a,c){"/"!=a[0]&&
"http://"!=a.substring(0,7)&&"https://"!=a.substring(0,8)&&(a=c+"/"+a);return a}})();
var Tobject={classHierarchy:"Tobject",extend:function(a,b,c){var d=this.prototype||Tobject,e={};e.classHierarchy={value:d.classHierarchy+" "+b};if(8!=panjs.iever){for(var f in a)if(f.startsWith("$")){b=a[f];f=f.droite("$");logger.debug("BINDABLE => "+f+", defaultValue="+b);e["__"+f]={value:b,writable:!0};b=new Function('var key = "__'+f+'", propName="'+f+'",oldValue=this[key];newValue=arguments[0]; if (this[key] != arguments[0]){this[key] = arguments[0]; this.__OnPropChanged(propName, oldValue, newValue);}');var g=
new Function('var key = "__'+f+'"; return this[key]');e[f]={get:g,set:b}}else e[f]={value:a[f],writable:!0,configurable:!0,enumerable:!0};a=Object.create(d,e);f=a.constructor;if(!(f instanceof Function))throw Error("You must define a method 'constructor'");f.prototype=a;f.prototype.parentClassName=c;f._super=d;f.extend=this.extend}else{e=a.constructor;for(f in d)"constructor"!=f&&"_super"!=f&&(e.prototype[f]=d[f]);for(f in a)"constructor"!=f&&"_super"!=f&&(e.prototype[f]=a[f]);e.extend=this.extend;
e._super=d;e.prototype.parentClassName=c;e.prototype.classHierarchy=d.classHierarchy+" "+b;f=e}return f},copyOwnTo:function(a,b){Object.getOwnPropertyNames(a).forEach(function(c){console.log(c);Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))});return b},injectParam:function(a,b,c,d){if("undefined"==typeof b||null==b){if("undefined"!=typeof d)return this[a]=d,!0;if("undefined"!=typeof c&&!0==c)throw"The "+a+" argument has no default value on "+this.className;return!1}this[a]=b;return!0}};
function defineClass(a,b,c){var d=b.endsWith(".html"),e=panjs.getClassNameFromClassPath(b);if("undefined"==typeof window[e]&&(d?panjs.loader.usesComponent(b):panjs.loader.uses(b),"undefined"==typeof window[e]))return logger&&logger.error("Unable to inherit from "+b+": class is not loaded"),null;try{window[a]=window[e].extend(c,a,e)}catch(f){alert(e+" "+f)}panjs.lastDefinedClassName=a}function uses(a){return a.endsWith(".html")?panjs.loader.usesComponent(a):panjs.loader.uses(a)}
defineClass("Tlogger","core.Tobject",{_level:null,name:"MAIN",creationDate:null,active:!0,_currentGroup:0,_tabulation:"",tab:[],constructor:function(a){this.injectParam("_level",a.level,!1,Tlogger.INFO);this.injectParam("name",a.name,!1);this.creationDate=(new Date).getTime();this.setLevel(this._level);this.active="undefined"!=typeof console;this.razTime();this.info("Init logger LEVEL=",this.getLevelName())},razTime:function(){this.creationDate=new Date},getLevelName:function(){if(this._level==Tlogger.DEBUG)return"DEBUG";
if(this._level==Tlogger.INFO)return"INFO";if(this._level==Tlogger.WARN)return"WARN";if(this._level==Tlogger.ERROR)return"ERROR"},groupStart:function(){this.active&&(this._currentGroup++,this._calcTabultation())},groupEnd:function(){this.active&&(this._currentGroup--,this._calcTabultation())},_calcTabultation:function(){this._tabulation="";for(var a=0;a<this._currentGroup;a++)this._tabulation+="\t"},_getTime:function(){return(new Date).getTime()-this.creationDate},_debug:function(){this.active&&(console.debug?
console.debug(this._getMessage("DEBUG",arguments)):console.info(this._getMessage("DEBUG",arguments)))},_info:function(){this.active&&console.log(this._getMessage("INFO",arguments))},_warn:function(){this.active&&console.warn(this._getMessage("WARN",arguments))},_error:function(){this.active&&console.error(this._getMessage("ERROR",arguments))},_getMessage:function(a,b){for(var c="",d=0;d<b.length;d++)c+=b[d];d=this._getTime()+"ms("+this._currentGroup+")";100>d&&(d+=" ");1E3>d&&(d+=" ");1E4>d&&(d+=
" ");1E5>d&&(d+=" ");return d+" - "+a+"\t"+this._tabulation+c},setLevel:function(a){this._level=a;this.debug=this._debug;this.info=this._info;this.warn=this._warn;this.error=this._error;a>=Tlogger.INFO&&(this.debug=function(){});a>=Tlogger.WARN&&(this.info=function(){});a>=Tlogger.ERROR&&(this.warn=function(){})}});Tlogger.DEBUG=10;Tlogger.INFO=20;Tlogger.WARN=25;Tlogger.ERROR=30;panjs.logger=new Tlogger({level:Tlogger[panjs.logLevel],name:"main"});logger=panjs.logger;Ttracer=function(){};
Ttracer.getLogger=function(a){return logger};
defineClass("Tloader","core.Tobject",{queue:[],_count:0,maxImbrications:10,loadedJs:null,loadedCss:null,_lessIsLoaded:null,randomId:"",constructor:function(a){this.loadedJs={};this.loadedCss={};this.randomId=Math.random()},lessIsLoaded:function(){null==this._lessIsLoaded&&(this._lessIsLoaded=defined(window.less,"refresh"));return this._lessIsLoaded},getClassPathDir:function(a){var b=a;a.endsWith(".js")?b=a.removeEnd(".js"):a.endsWith(".html")&&(b=a.removeEnd(".html"));return b=b.substr(0,b.lastIndexOf("."))},
getUrlWithVersion:function(a){a=!1==a.contains("?")?a+"?":a+"&";a+="v="+panjs.appVersion;"dev"==panjs.env&&(a=a+"&rid="+this.randomId);return a},loadFile:function(a){try{var b={result:!1,exception:"",status:"erreur inconnue"};logger.debug("Loadfile SYNC ",a);jQuery.support.cors=!0;var c=jQuery.ajax({url:a,method:"GET",cache:!0,async:!1,dataType:"html",processData:!1,context:this,beforeSend:function(a){a.setRequestHeader("Cache-Control","no-transform")},success:function(c,d,g){this.onLoadFileSuccess(g,
a);b={result:!0,data:c}},error:function(d,f,g){this.onLoadFileError(c,f,g,a);b={result:!1,jqXHR:c,exception:g};b.status=c&&c.status?c.status:g}})}catch(d){b={result:!1,exception:d,status:d}}return b},onLoadFileSuccess:function(a,b){},onLoadFileError:function(a,b,c,d){logger.error("Echec chargement "+d+": "+c)},usesComponent:function(a){var b=panjs.getClassNameFromClassPath(a),c=null,d=null;if(this._count>this.maxImbrications)return{result:!1,message:"Too much nested components (max: "+this.maxImbrications+
")",className:b,classPath:a,url:c,path:"?",Class:null};if("undefined"==typeof window[b]){logger.groupStart();0==this._count&&logger.info(" ************ "," USESCOMPONENT ",a," ************ ");this._count++;var d=panjs.getAbsoluteUrlFromClassPath(a),c=this.getUrlWithVersion(d),e=this.loadFile(c);if(e.result){try{var f=getXmlDocument(e.data)}catch(g){return logger.error(g),{result:!1,message:g,className:b,classPath:a,url:c,path:d}}for(var h=f.getElementsByTagName("head")[0],f=f.getElementsByTagName("body")[0],
l=[],n=[],t=d.substring(0,d.lastIndexOf("/")),m=0;m<h.childNodes.length;m++){var r=h.childNodes[m],s=r.nodeName.toLowerCase();if("script"==s)try{this.addScriptNode(r,t,b)}catch(w){return e="Error processing <"+s+"> in "+b+" => "+w,logger.error(d,e),{result:!1,message:e,className:b,classPath:a,url:c,path:d,stack:w.stack}}else"link"==s?l.push(r):"style"==s&&n.push(r)}if("undefined"==typeof window[b])return e=a+" class has not been loaded. ",panjs.lastDefinedClassName!=b&&(e+="\n"+panjs.getMessage(panjs.messages.CLASSNAME_MATCHS_FILENAME,
panjs.lastDefinedClassName,d)),logger.error(e),{result:!1,message:e,className:b,classPath:a,url:c,path:d,stack:null};for(m=0;m<l.length;m++)this.addLinkNode(l[m],t);for(m=0;m<n.length;m++)logger.debug("Load style ",a),this.addStyleNode(n[m]);if(defined(f))try{var q=getXml(f),u=window[b].prototype.parentClassName;defined(window[u].prototype.html)&&window[u].prototype.html.contains("\x3c!--CONTENT--\x3e")&&(q=window[u].prototype.html.replace("\x3c!--CONTENT--\x3e",q));q=q.replace(/<body>/gi,"").replace(/<\/body>/gi,
"");q=q.replace(/\\r/gi,"").replace(/\\n/gi,"").trim();window[b].prototype.html=q;if(8==panjs.iever){var x=$("<div>"+q+"</div>");window[b].prototype.html=x[0].innerHTML}window[b].prototype.bodyNode=f}catch(y){return{result:!1,message:y.message,className:b,classPath:a,url:c,path:d,Class:null}}panjs.setSourceInComponents&&(window[b].prototype.source=e.data);window[b].prototype.classPath=a;window[b].prototype.classPathDir=this.getClassPathDir(a);window[b].prototype.className=b;window[b].prototype.dirPath=
t;window[b].lastId=0;this._count--;0==this._count&&logger.debug(" ************ "," END USESCOMPONENT ",a," ************ ");logger.groupEnd();return{result:!0,message:"ok",className:b,classPath:a,url:c,path:d,Class:window[b]}}e="Error loading "+a+": "+e.status;logger.warn(e);this._count--;logger.groupEnd();return{result:!1,message:e,className:b,classPath:a,url:c,path:d,Class:null}}return{result:!0,message:"Already loaded",className:b,classPath:a,url:c,path:d,Class:window[b]}},uses:function(a){var b=
panjs.getClassNameFromClassPath(a),c=null,d=null;if("undefined"==typeof window[a]){logger.groupStart();0==this._count&&logger.info(" ------------ "," USES ",a," ------------ ");var d=panjs.getAbsoluteUrlFromClassPath(a),e=d.substring(0,d.lastIndexOf("/"));if(this.loadedJs[d.toLowerCase()])return!0;this._count++;logger.groupStart();var c=this.getUrlWithVersion(d),f=this.loadFile(c);f.result&&(f.data=this.processCode(f.data,b),panjs.exec(f.data),panjs.setSourceInComponents&&(window[b].prototype.source=
f.data),window[b].prototype.classPath=a,window[b].prototype.className=b,window[b].prototype.classPathDir=this.getClassPathDir(a),window[b].prototype.dirPath=e,window[b].lastId=0,window[a]=window[b]);this._count--;logger.groupEnd();0==this._count&&logger.debug(" ------------ "," END USES ",a," ------------ ");logger.groupEnd();return{result:!0,message:"ok",className:b,classPath:a,url:c,path:d,Class:window[b]}}return{result:!0,message:"Already loaded",className:b,classPath:a,url:c,path:d,Class:window[b]}},
addLinkNode:function(a,b){var c=panjs.transformUrl(a.getAttribute("href"),b),d=a.getAttribute("type")||"text/css",e=a.getAttribute("rel")||"stylesheet";this.loadCssFile(c,d,e)},loadCssFile:function(a,b,c){var d=!1;a=this.getUrlWithVersion(a);if(this.loadedCss[a.toLowerCase()])return d;if(0==arguments.length)throw"loadCssFile(url, type , rel): Missing url";"undefined"==typeof b&&(b="text/css");"undefined"==typeof c&&(c="stylesheet");if(document.createStyleSheet&&8==panjs.iever)document.createStyleSheet(a),
d=!0;else{var e=document.createElement("link");e.rel=c;e.type=b;e.href=a;"stylesheet/less"==c?0<panjs.iever&&8>=panjs.iever?logger.warn(panjs.getMessage(panjs.messages.LESS_IE8,panjs.iever)):this.lessIsLoaded()?(less.sheets.push(e),less.refresh(!0),logger.debug("INJECTION LESS OK"),d=!0):logger.warn(panjs.getMessage(panjs.messages.LESS_NOT_LOADED)):(document.getElementsByTagName("head")[0].appendChild(e),d=!0)}!0==d&&logger.debug("Load <link> ASYNC: "+a);this.loadedCss[a.toLowerCase()]=!0;return d},
addStyle:function(a,b){""!=a.trim()&&("undefined"==typeof b&&(b="text/css"),$('<style type="'+b+'">'+a+"</style>").appendTo("head"),"text/less"==b&&(0<panjs.iever&&8>=panjs.iever?logger.warn(panjs.getMessage(panjs.messages.LESS_IE8,panjs.iever)):this.lessIsLoaded()?(less.refresh(),logger.debug("INJECTION LESS OK")):logger.warn(panjs.getMessage(panjs.messages.LESS_NOT_LOADED))),8==panjs.iever&&"undefined"!=typeof respond&&respond.update())},addStyleNode:function(a){var b=a.getAttribute("type");null==
b&&(b="text/css");a=getText(a);this.addStyle(a,b)},processCode:function(a,b){return a.replace(/this._super/g,b+"._super")},addScriptNode:function(a,b,c){if(null==a.getAttribute("src"))b=getText(a),null!=c&&"text/x-class-definition"==a.getAttribute("type")&&(b=this.processCode(b,c)),panjs.exec(b);else if(b=panjs.transformUrl(a.getAttribute("src"),b),this.loadedJs[b.toLowerCase()])logger.debug("Le script "+b+" est d\u00e9j\u00e0 charg\u00e9");else{var d=this.loadFile(this.getUrlWithVersion(b));null!=
c&&"text/x-class-definition"==a.getAttribute("type")&&(d.data=this.processCode(d.data,c));panjs.exec(d.data);this.loadedJs[b.toLowerCase()]=1}return!0}});panjs.loader=new Tloader;
defineClass("Tevent","core.Tobject",{type:null,data:null,bubbles:!1,cancelable:!1,currentTarget:null,cancelled:!1,defaultPrevented:!1,constructor:function(a,b,c,d){this.injectParam("type",a,!0);this.injectParam("data",b);this.injectParam("bubbles",c);this.injectParam("cancelable",d)},preventDefault:function(){this.defaultPrevented=!0}});Tevent.CLICK="CLICK";Tevent.CHANGE="CHANGE";Tevent.SUCCESS="SUCCESS";Tevent.ERROR="ERROR";Tevent.DELETE="DELETE";Tevent.UPDATE="UPDATE";Tevent.ADDED="ADDED";
Tevent.LOADED="LOADED";Tevent.BEFORE_LOAD="BEFORE_LOAD";Tevent.DATA_LOADED="DATA_LOADED";Tevent.REFRESH="REFRESH";Tevent.REPLACE="REPLACE";Tevent.ITEM_CLICKED="ITEM_CLICKED";Tevent.OPEN="OPEN";Tevent.CLOSE="CLOSE";Tevent.READY="READY";Tevent.BEFORE_STATE_CHANGE="BEFORE_STATE_CHANGE";Tevent.STATE_CHANGED="STATE_CHANGED";Tevent.SHOW="SHOW";Tevent.SHOWN="SHOWN";Tevent.HIDE="HIDE";Tevent.HIDDEN="HIDDEN";Tevent.WAITING="WAITING";uses("core.events.Tevent");
defineClass("TeventDispatcher","core.Tobject",{_listeners:null,constructor:function(a){this._listeners={}},free:function(){this.removeAllListeners()},_getListenerIndex:function(a,b){if(!this.hasEventListener(a))return-1;for(var c=0;c<this._listeners[a].length;c++)if(this._listeners[a][c].listener==b)return c;return-1},dispatchEvent:function(a){if(this.hasEventListener(a.type))for(var b=this._listeners[a.type],c=0;c<b.length;c++)if(null!=b[c]){var d=b[c];null==a.currentTarget&&(a.currentTarget=this);
a.bind=d.bind;a.relatedData=d.data;null==a.bind?d.listener(a):d.listener.call(a.bind,a);if(a.cancelled)break}},on:function(a,b,c,d){4>arguments.length&&(d=null);3>arguments.length&&(c=null);var e={listener:b,data:d,bind:c};this.hasEventListener(a)||(this._listeners[a]=[]);for(var f=0;f<this._listeners[a].length;f++)if(null==this._listeners[a][f]){this._listeners[a][f]=e;return}this._listeners[a].push(e)},off:function(a,b){var c=this._getListenerIndex(a,b);0<=c&&(this._listeners[a][c]=null)},removeAllListeners:function(){for(type in this._listeners)this._listeners[type].length=
0,this._listeners[type]=null,delete this._listeners[type]},hasEventListener:function(a){return"undefined"!=typeof this._listeners[a]}});defineClass("Application","core.events.TeventDispatcher",{constructor:function(a){}});
defineClass("Trouter","core.events.TeventDispatcher",{hash:"",sendEvents:!0,keys:{},listeners:{},base64encode:!1,constructor:function(a){Trouter._super.constructor.call(this,a);"onhashchange"in window?window.onhashchange=this.onhashchange.bind(this):logger.error("Trouter.constructor: Event window.hashchanging not supported!")},refreshkeys:function(){var a=window.location.hash.droite("#");this.keys=this.decode(a)},registerComponent:function(a,b){this.refreshkeys();this.listeners[a.hashKey]={owner:a,
onhashchange:b.bind(a)}},getHash:function(a){return this.keys[a.hashKey]||null},setHash:function(a,b){if(this.keys[a.hashKey]!=b){this.keys[a.hashKey]=b||null;var c=this.encode(this.keys);sendEvents=!1;window.location.hash=c;this._dispatchOnhashchange(a.hashKey,b);sendEvents=!0}else logger.debug("Trouter.setHash: "+b+" => inchang\u00e9 sur "+a.id)},_dispatchOnhashchange:function(a,b){"undefined"==typeof b&&(b=null);if(null!=a){var c=this.listeners[a];return c.onhashchange(b)}for(var d in this.listeners)null!=
d&&(c=this.listeners[d],c.onhashchange(b))},decode:function(a){var b={};if(""!=a)try{this.base64encode&&(a=base64decode(a));a=a.split("&");for(var c=0;c<a.length;c++)if(""!=a[c].trim()){var d=a[c].split("=");k=d[0];v=d[1];b[k]=v}}catch(e){logger.error("Trouter.decode: Echec decodage de "+a+" en objet: "+e)}return b},encode:function(a){var b="";try{for(k in a)"string"==typeof a[k]&&(b=b+k+"="+a[k]+"&");this.base64encode&&(b=base64encode(b))}catch(c){logger.error("Trouter.encode: Echec encodage de "+
a+" en string: "+c),logger.debug("Trouter.encode: obj = "+JSON.encode(a))}return b},onhashchange:function(a){if(!this.sendEvents)return!1;this.hash=window.location.hash.droite("#");this.keysTmp=this.decode(this.hash);for(k in this.keysTmp)"undefined"==typeof this.keys[k]||null==this.keys[k]?(this.keys[k]=this.keysTmp[k],logger.debug("Trouter.onhashchange: [1] Le composant "+k+" va \u00eatre notifi\u00e9 que son hash a chang\u00e9: hash="+this.keys[k]),this._dispatchOnhashchange(k,this.keys[k])):this.keysTmp[k]!=
this.keys[k]&&(this.keys[k]=this.keysTmp[k],logger.debug("Trouter.onhashchange: [2] Le composant "+k+" va \u00eatre notifi\u00e9 que son hash a chang\u00e9: hash="+this.keys[k]),this._dispatchOnhashchange(k,this.keys[k]));for(k in this.keys)found=!0,"undefined"==typeof this.keysTmp[k]&&(this.keys[k]=null,logger.debug("Trouter.onhashchange: [3] Le composant "+k+" va \u00eatre notifi\u00e9 que son hash a chang\u00e9: hash="+this.keys[k]),"undefined"!=typeof this.listeners[k]&&this._dispatchOnhashchange(k,
this.keys[k]));a=new Tevent(Trouter.HASH_CHANGE,this.keys);this.dispatchEvent(a);return!1}});Trouter.HASH_CHANGE="HASH_CHANGE";panjs.router=new Trouter;
defineClass("TproxyDisplayObject","core.events.TeventDispatcher",{autoload:!1,loaded:!1,sourceElement:null,parent:null,args:null,dataType:null,constructor:function(a){TproxyDisplayObject._super.constructor.call(this,a);this.className="TproxyDisplayObject";this.injectParam("sourceElement",a.sourceElement,!0);this.sourceElement.style.display="none";this.sourceElement.setAttribute("loaded","false");this.dataType=this.sourceElement.getAttribute("data-compo");this.args=a;null==this.args&&(this.args={})},
load:function(a){var b=this.sourceElement;if(null!=b&&!1==this.loaded){var c=b.originalId;logger.debug("LOADING "+this.dataType+"."+c);this.args.elem=b;this.args.parent=this.parent;if(0<arguments.length)for(var d in a)this.args[d]=a[d];this.dispatchEvent(new Tevent(Tevent.BEFORE_LOAD,{args:this.args,dataType:this.dataType}));d=panjs.createComponent(this.dataType,this.args);d.parent=this.parent;b.owner[c]=d;$(b).replaceWith(d.container);d.container[0].originalId=c;d.loaded=!0;d.visible&&d.show();b.setAttribute("id",
b.owner.id+"_"+c);b=new Tevent(Tevent.LOADED,d);this.dispatchEvent(b);return d}},hide:function(){},show:function(){}});
defineClass("TarrayCollection","core.events.TeventDispatcher",{_source:null,length:0,key:null,_byId:null,filterFunction:null,_items:null,constructor:function(a){TarrayCollection._super.constructor.call(this,a);this._items=[];var b=[];a&&("undefined"!=typeof a.push?b=a:(a.key&&(this.key=a.key),a.data&&(b=a.data),a.filterFunction&&(this.filterFunction=a.filterFunction)));this._byId={};this.setSource(b)},sort:function(a){defined(a)&&this._items.sort(a)},getSource:function(){return this._items},setSource:function(a){if(this._source!=
a){this._source=a;this._items=null!=this.filterFunction?this._source.filter(this.filterFunction):this._source.slice(0);if(null!=this.key)for(this._byId={},a=0;a<this._items.length;a++)this._byId[this._items[a][this.key]]=this._items[a];this.length=this._items.length;this.refresh()}},find:function(a){var b=[];if(a.filterFunction)for(var c=0;c<this._source.length;c++)a.filterFunction(this._source[c])&&b.push(this._source[c]);return b},getByKey:function(a){return this._byId[a]},getByProp:function(a,
b,c,d){var e=null;if(null!=this.key&&a==this.key)"undefined"!=typeof this._byId[b]&&(e=this._byId[b]);else{"undefined"==typeof d&&(d=!1);d||"string"!=typeof b||(b=b.toLowerCase());3>arguments.length?c=!1:e=[];for(var f=0;f<this._items.length;f++){var g=this._items[f];if("undefined"!=typeof g[a]){var h=g[a];d||"string"!=typeof g[a]||(h=g[a].toLowerCase());if(h==b)if(!0==c)e.push(g);else{e=g;break}}}}return e},getFilterFunction:function(){return this.filterFunction},setFilterFunction:function(a){this.filterFunction!=
a&&(this.filterFunction=a)},dispatchUpdateEvent:function(a,b){this.dispatchEvent(new Tevent(Tevent.UPDATE,b));this.dispatchEvent(new Tevent(Tevent.CHANGE,{action:"UPDATE",item:a,newItem:b}))},refresh:function(){this._items=null!=this.filterFunction?this._source.filter(this.filterFunction):this._source.slice(0);this.length=this._items.length;this.dispatchEvent(new Tevent(Tevent.REFRESH,this));this.dispatchEvent(new Tevent(Tevent.CHANGE,{action:"REFRESH"}))},itemUpdated:function(a,b,c,d){this.dispatchEvent(new Tevent(Tevent.UPDATE,
a))},_getItemIndex:function(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return c;return-1},getItemIndex:function(a){return this._getItemIndex(a,this._items)},getItemAt:function(a){return this._items[a]},contains:function(a){return 0<=this.getItemIndex(a)},_replaceItem:function(a,b,c){this._items[a]=c;null!=this.key&&(this._byId[b[this.key]]=c,this.dispatchEvent(new Tevent(Tevent.UPDATE,b)));this.length=this._items.length;this.dispatchEvent(new Tevent(Tevent.REPLACE,{item:b,newItem:c}));this.dispatchEvent(new Tevent(Tevent.CHANGE,
{action:"REPLACE",item:b,newItem:c}))},sendUpdateEvent:function(a){this.dispatchEvent(new Tevent(Tevent.UPDATE,a))},replaceItem:function(a,b){if(a!=b){var c=this._getItemIndex(a,this._source);-1<c&&(this._source[c]=b);c=this.getItemIndex(a);-1<c&&(null==this.filterFunction?this._replaceItem(c,a,b):this.filterFunction(b)?this._replaceItem(c,a,b):this._removeItemAt(c,b))}},_addItemAt:function(a,b){if(null!=this.key){if("undefined"!=typeof this._byId[b[this.key]])throw"Key already in collection: "+b[this.key];
this._byId[b[this.key]]=b}this._items.splice(a,0,b);this.length=this._items.length;this.dispatchEvent(new Tevent(Tevent.ADDED,{item:b,index:a}));this.dispatchEvent(new Tevent(Tevent.CHANGE,{action:"ADDED",item:b,index:a}))},addItem:function(a){this._source.push(a);(null==this.filterFunction||this.filterFunction(a))&&-1==this.getItemIndex(a)&&this._addItemAt(this.length,a)},addItemsAt:function(a,b){if(b>this.length)this.addItems(a);else for(var c=b,d=0;d<a.length;d++)if(this._source.push(a[d]),null==
this.filterFunction||this.filterFunction(a[d]))b=this.getItemIndex(a[d]),-1<b&&(c++,this._addItemAt(c,a[d]))},addItems:function(a){this.addItemsAt(a,this.length)},addItemAt:function(a,b){b>this.length?this.addItem(a):(this._source.push(a),(null==this.filterFunction||this.filterFunction(a))&&this._addItemAt(b,a))},removeItem:function(a){var b=this.getItemIndex(a);0<=b&&this._removeItemAt(b,a);return b},removeItemAt:function(a){var b=this.getItemAt(a);null!=b&&this._removeItemAt(a,b)},removeAll:function(){this._source=
[];this._items=[];this._byId={};this.refresh()},_removeItemAt:function(a,b){this._items.splice(a,1);var c=this._getItemIndex(b,this._source);0<=c&&this._source.splice(c,1);this.length=this._items.length;null!=this.key&&delete this._byId[b[this.key]];this.dispatchEvent(new Tevent(Tevent.DELETE,b));this.dispatchEvent(new Tevent(Tevent.CHANGE,{action:"DELETE",item:b}))}});
defineClass("TdisplayObject","core.events.TeventDispatcher",{container:null,id:null,parent:null,_parent:null,visible:!0,autoload:!0,loaded:!1,baseElement:null,_realVisible:!1,args:null,load:function(){return this},free:function(){TdisplayObject._super.free.call(this);this.container.remove()},_onInitialized:function(){},constructor:function(a){TdisplayObject._super.constructor.call(this,a);this.args=a;if(null==this.baseElement)throw'La propri\u00e9t\u00e9 "baseElement" n\'est pas d\u00e9fini sur '+
this.className;this.container=$("<"+this.baseElement+"/>");window[this.className].lastId++;this._setId(this.className+window[this.className].lastId);this.container[0].owner=this},addClass:function(a){this.container.addClass(a)},removeClass:function(a){this.container.removeClass(a)},appendTo:function(a){a.append(this.container)},prependTo:function(a){this.container.prependTo(a)},_setId:function(a){this.id=a;this.container.attr("id","ctn"+this.id)},hide:function(a){this.container.hide(a);this._realVisible=
this.visible=!1;"undefined"!=typeof this._onHide&&this._onHide()},show:function(a){this._realVisible||(this.container.show(a),this._realVisible=this.visible=!0,"undefined"!=typeof this._onShow&&this._onShow())},toggle:function(a){this.container.toggle("fast");this.visible=!this._visible}});
defineClass("TdisplayObjectContainer","core.display.TdisplayObject",{_statesElements:null,currentState:null,defaultState:null,_bindElements:null,__bindings:null,constructor:function(a){this._bindElements=[];this.__bindings={html:[]};TdisplayObjectContainer._super.constructor.call(this,a);this._statesElements=[];this.currentState=[];defined(this.html)&&""!=this.html.trim()&&(this.container.html(this.html),this._populateElements(this.container[0],!0,[]))},bindEvent:function(a,b){var c=a.attr("data-on"+
b);c&&(c.startsWith("{{")?(c=c.droite("{{").gauche("}}"),c=(new Function(c)).bind(this),a.on(b,c)):(new Function('arguments[0].on("'+b+'", '+c+".bind(this))")).bind(this)(a,b))},bindEvents:function(a){for(var b="click change blur blur keyup dblclick".split(" "),c=0;c<b.length;c++)this.bindEvent(a,b[c]);this.bind(a)},bind:function(a){var b=a.html();if(b.match(/\{\{.*\}\}/)){var c=doT.template(b).bind(this);this.__bindings.html.push({template:b,element:a,tempFn:c})}},renderBindings:function(){for(var a=
0;a<this.__bindings.html.length;a++){var b=this.__bindings.html[a];try{b.element.html(b.tempFn(this))}catch(c){logger.error(c)}}},free:function(){TdisplayObjectContainer._super.free.call(this)},__OnPropChanged:function(a,b,c){logger.debug("__OnPropChanged : propName = "+a+", oldValue = "+b+", newValue = "+c);this.renderBindings()},processStates:function(a){var b=a.getAttribute("includeIn");null!=b&&(b=0<=b.indexOf(",")?b.split(","):[b]);var c=a.getAttribute("excludeFrom");null!=c&&(c=0<=c.indexOf(",")?
c.split(","):[c]);null==b&&null==c||this._statesElements.push({elem:a,id:a.getAttribute("id"),includeIn:b,excludeFrom:c})},stateExists:function(a){var b=!1;if(null==a||""==a)return!1;for(var c=0;c<this._statesElements.length;c++){var d=this._statesElements[c];if(null!=d.includeIn&&0<=d.includeIn.indexOf(a)){b=!0;break}else if(null!=d.excludeFrom&&0<=d.excludeFrom.indexOf(a)){b=!0;break}}return b},_setStateElementVisible:function(a,b){a?this[b.elem.originalId]?this[b.elem.originalId].className?(this[b.elem.originalId].load(),
this[b.elem.originalId].show()):$(b.elem).show():$(b.elem).show():this[b.elem.originalId]?this[b.elem.originalId].className?this[b.elem.originalId].hide():$(b.elem).hide():$(b.elem).hide()},setState:function(){var a=this.currentState;this.currentState=[];for(var b=!1,c=0;c<this._statesElements.length;c++){for(var d=this._statesElements[c],e=null,f=null,g=0;g<arguments.length;g++){var h=arguments[g];if(this.stateExists(h)&&(!1==b&&this.currentState.push(h),null!=d.includeIn&&!0!=e&&(e=0<=d.includeIn.indexOf(h)),
null!=d.excludeFrom&&!0!=f&&(f=0<=d.excludeFrom.indexOf(h))))break}b=!0;null==e&&null==f||this._setStateElementVisible((!0==e||null==e)&&(!1==f||null==f),d)}for(g=0;g<this.currentState.length;g++)this.dispatchEvent(new Tevent(Tevent.STATE_CHANGED,{oldStates:a,state:this.currentState[g]}))},_populateElements:function(a,b,c){for(var d=0;d<a.childNodes.length;d++){var e=a.childNodes[d];if(1==e.nodeType){var f=e.getAttribute("id"),g=e.getAttribute("data-compo");null==g?(g=$(e),b&&null!=f&&(defined(this[f])&&
logger.error('1-Duplication du id "'+f+'" sur objet '+this.className),this[panjs.getFormatedIdName(f)]=g,c.push(f)),this.bindEvents(g),this._populateElements(e,b,c)):g==this.classPath?logger.error("R\u00e9f\u00e9rence circulaire dans "+this.classPath):"false"!==e.getAttribute("autoload")?(g=panjs.createComponent(g,{elem:e,parent:this}),g.parent=this,b&&null!=f&&(defined(this[f])&&logger.error('2-Duplication du id "',f,'" sur objet ',this.className),this[f]=g,c.push(f)),!0==g.visible?($(e).replaceWith(g.container),
g.container[0].owner=g):logger.info("PAS DE replaceWith pour ",g.id," visible = ",g.visible," ",typeof g.visible),e.loaded=!0,g.loaded=!0):(e.setAttribute("id",this.id+"_"+f),uses("core.display.TproxyDisplayObject"),g=new TproxyDisplayObject({sourceElement:e}),g.parent=this,e.loaded=!1,$(e).hide(),b&&null!=f&&(this[f]=g));e.originalId=f;e.owner=this;this.processStates(e)}else 8==e.nodeType&&(f="",f=-1==panjs.iever||8<panjs.iever?e.textContent:e.text.droite("\x3c!--").gauche("--\x3e").trim(),f=f.toUpperCase(),
"CONTENT"==f&&(f=document.createElement("div"),f.setAttribute("data-class","content"),a.replaceChild(f,e),this.content=$(f)))}return c}});TdisplayObjectContainer._listeIdElements=[];
defineClass("Telement","core.display.TdisplayObjectContainer",{html:null,content:null,sourceElement:null,inheritsStyle:!0,enableHashManager:!1,hashKey:null,sourceElementStyle:null,constructor:function(a){Telement._super.constructor.call(this,a);!0==this.enableHashManager&&(uses("core.managers.Trouter"),null==this.hashKey&&(this.hashKey=this.id),panjs.router.registerComponent(this,this._onHashChange,this.hashKey));var b;b=this.inheritsStyle?this.classHierarchy.droite("Telement"):this.className;this.container.addClass(b);
this.container.attr("data-compo",this.classPath);this.container.attr("data-class-name",this.className);"undefined"!=typeof a&&defined(a,"elem")&&(this.sourceElement=a.elem,null!=this.content&&""!=this.sourceElement.innerHTML.trim()&&(this.content[0].innerHTML=this.sourceElement.innerHTML,"undefined"!=typeof a.parent&&(this.parent=a.parent,a.parent._populateElements(this.content[0],!0,[]))),b=a.elem.getAttribute("class"),null!=b&&this.container.addClass(b));a=a.inlineStyle||null;null!=a&&(this.sourceElementStyle=
a,this.setStyle(a))},setStyle:function(a){this.container.attr("style",a)},_onHashChange:function(a){var b=!1;this.enableHashManager&&"function"===typeof this.onHashChange&&(logger.debug("Telement."+this.id+"._onHashChange => "+a),b=this.onHashChange(a));return b},_onShow:function(){},_onHide:function(){},setHash:function(a){this.enableHashManager&&panjs.router.setHash(this,a)},getHash:function(){return this.enableHashManager?panjs.router.getHash(this):null}});
defineClass("TrestClient","core.events.TeventDispatcher",{dataType:"json",exitCodeFieldName:null,errorTextFieldName:null,lastTokenId:0,extraUrlParams:null,constructor:function(a){TrestClient._super.constructor.call(this,a);this.injectParam("dataType",a.dataType,!1);this.injectParam("exitCodeFieldName",a.exitCodeFieldName,!1);this.injectParam("errorTextFieldName",a.errorTextFieldName,!1);this.injectParam("baseUrl",a.baseUrl);this.injectParam("extraUrlParams",a.extraUrlParams)},getNewTokenId:function(){TrestClient.lastTokenId++;
return TrestClient.lastTokenId},_getSuccessEvent:function(a,b,c){logger.debug("X-Time="+b.getResponseHeader("X-Time"));a=new Tevent(Tevent.SUCCESS,a);a.xTime=b.getResponseHeader("X-Time");a.req=b;return a},_getErrorEvent:function(a,b,c,d,e){b={req:a,method:b,responseText:"",statusText:"Erreur inconnue",status:0,url:"url=?"};defined(a,"statusText")?b.statusText=a.statusText:b.statusText="";defined(c)&&(b.statusText=c);defined(d)&&(b.url=d);defined(a,"responseText")&&(b.responseText=a.responseText);
""==b.responseText&&(b.responseText="Empty response. status="+b.statusText);defined(a,"status")&&(b.status=a.status);0==b.status&&(b.status=1);b.token=e;try{b.data=JSON.parse(b.responseText)}catch(f){b.data=b.responseText}return new Tevent(Tevent.ERROR,b)},post:function(a,b,c,d,e,f){this._call("POST",a,b,c,d||null,e||null,f)},get:function(a,b,c,d,e,f){this._call("GET",a,b,c,d||null,e||null,f)},getText:function(a,b,c,d,e,f){this._call("GET",a,b,c,d||null,e||null,f,"text")},put:function(a,b,c,d,e,f){this._call("PUT",
a,b,c,d||null,e||null,f)},del:function(a,b,c,d,e,f){this._call("DELETE",a,b,c,d||null,e||null,f)},_call:function(a,b,c,d,e,f,g,h){8>arguments.length&&(h=this.dataType);"json"!=h||"POST"!=a&&"PUT"!=a||(d=JSON.stringify(d));g.id=this.getNewTokenId();-1==b.lastIndexOf("?")&&(b+="?");b+="&";var l=this.extraUrlParams;if(defined(c))if("object"==typeof c)for(p in c)l+=l+"&"+p+"="+c[p];else l+="&"+c;var n=this.baseUrl+b+l;logger.debug("Appel ",a,": ",n,", dataType="+h);return $.ajax({url:n,async:!0,data:d,
context:this,type:a,xhrFields:{withCredentials:!0},dataType:h,success:function(c,d,h){logger.debug("Requ\u00eate AJAX "+g.requestId+" termin\u00e9e avec succ\u00e8s sur ",b);if(g.aborted)logger.debug("Requ\u00eate "+g.requestId+" ANNULEE sur ",b);else{if(null!=this.exitCodeFieldName&&(d=c[this.exitCodeFieldName],defined(d)&&400<=d)){c=this._getErrorEvent(h,a,c[this.errorTextFieldName],n,g);this.dispatchEvent(c);defined(f)&&f(c,g);return}c=this._getSuccessEvent(c,h,g);this.dispatchEvent(c);defined(e)&&
e(c,g)}},error:function(c,d,e){logger.debug("ECHEC Requ\u00eate AJAX "+g.requestId+" "+e+" sur ",b);if(g.aborted)logger.debug("Requ\u00eate "+g.requestId+" ANNULEE sur ",b);else{var h="?";0==c.readyState&&(h="request not initialized");1==c.readyState&&(h="server connection established");2==c.readyState&&(h="request received ");3==c.readyState&&(h="processing request");4==c.readyState&&(h="request finished and response is ready");var l=JSON.stringify(c.getAllResponseHeaders());logger.error("responseHeaders="+
l+", readyState="+h+", jqXHR.responseText = "+c.responseText+", jqXHR.responseXml = "+c.responseXML+", textStatus="+d+", errorThrown = "+e);c=this._getErrorEvent(c,a,e,n,g);this.dispatchEvent(c);defined(f)&&f(c,g)}}})}});
