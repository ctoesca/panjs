(function(){panjs.logger=null;panjs.root={id:"root",components:{}};panjs.loader=null;panjs.iever=getIEVersion();panjs.chromever=getChromeVersion();panjs.ffver=getFirefoxVersion();panjs.stack=[];panjs.stackLevel=0;panjs.setSourceInComponents=!1;panjs.messages={CLASSNAME_MATCHS_FILENAME:"The name of the class (%1) must match the file name %2 (case sensitive)",LESS_IE8:"less is not fully compatible with IE%1 : transform less code in css",LESS_NOT_LOADED:"LESS not loaded. Use panjs_core_with_less.min.js or load LESS (before panJs)"};
panjs.getMessage=function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];null==c&&(c="null");a=a.replace("%"+b,c)}return a};panjs.getClass=function(a){"undefined"==typeof window[a]&&uses(a);return window[a]};panjs.getInstance=function(a,b){return new (panjs.getClass(a))(b)};window.less="undefined"!=typeof panjs.less?panjs.less:{env:"production",async:!0,fileAsync:!1,poll:1E3,functions:{},dumpLineNumbers:"comments",relativeUrls:!1,rootpath:":/a.com/"};for(var b=0;b<panjs.namespaces.length;b++)"undefined"!=
typeof panjs.namespaces[b]&&(panjs.namespaces[b].path=panjs.namespaces[b].path.replace("{version}",panjs.version));panjs.createComponent=function(a,b){panjs.stackLevel++;var c=panjs.getClassNameFromClassPath(a),d=null;if("undefined"==typeof window[c])try{var e=panjs.loader.usesComponent(a);if(!e.result)throw e;}catch(g){return"string"==typeof g&&(g={message:g,className:c}),uses("core.display.TerrorElement.html"),d=new TerrorElement(g),panjs.stack.push(g.message),panjs.stackLevel--,0>=panjs.stackLevel&&
(panjs.stack=[],panjs.stackLevel=0),d}try{"undefined"==typeof b&&(b={});"undefined"!=typeof b.elem&&panjs.setElementArgs(b.elem,b);if("undefined"!=typeof panjs.root.components[a]&&"undefined"!=b.reuse&&!0===b.reuse){var h=panjs.root.components[a];h.reuse(b);return h}d=new window[c](b)}catch(m){e="Error instantiating "+c+": "+m,logger.error(e),uses("core.display.TerrorElement.html"),d=panjs.getAbsoluteUrlFromClassPath(a),h=panjs.loader.getUrlWithVersion(d),d=new TerrorElement({message:e,path:d,url:h,
className:c}),panjs.stack.push(e)}panjs.stackLevel--;0>=panjs.stackLevel&&(panjs.stack=[],panjs.stackLevel=0);d._onInitialized&&d._onInitialized();return panjs.root.components[a]=d};panjs.setElementArgs=function(a,b){if("undefined"!=typeof a)for(var c=0;c<a.attributes.length;c++){var d=a.attributes.item(c),e=d.nodeName.toLowerCase(),d=d.value;e.startsWith("data-")&&(e=panjs.getFormatedArgName(e));"true"==d?d=!0:"false"==d&&(d=!1);b[e]=d}};panjs.getFormatedIdName=function(a){if(-1==a.indexOf("-"))return a;
var b="";a=a.split("-");for(var c=0;c<a.length;c++)b=0==c?a[c]:b+a[c].capitalizeFirstLetter();return b};panjs.getFormatedArgName=function(a){var b="";a=a.split("-");for(var c=1;c<a.length;c++)b=1==c?a[c]:b+a[c].capitalizeFirstLetter();return b};panjs.loadScript=function(a,b){$LAB.script(a).wait(function(){"undefined"!=typeof b&&b(a)})};panjs.load=function(a){panjs._load(a)};panjs.exec=function(a){""!=a&&("undefined"!=typeof window.execScript?window.execScript(a):window.eval(a))};panjs._load=function(a){0==
arguments.length&&(a=$(document.body));var b=[];null!=a.attr("data-compo")?b.push(a):b=a.getElements("[data-compo]");for(var c=0;c<b.length;c++){var d=b[c],e=d.attr("data-compo"),g="false"!==d.attr("autoload"),h=d.attr("id");!0==g?(e=panjs.createComponent(e,{elem:d[0]}),d.replaceWith(e.container),e.container[0].owner=e):(uses("core.display.TproxyDisplayObject"),e=new TproxyDisplayObject({sourceElement:d[0]}),e.parent=this,d[0].loaded=!1,d.hide(),d[0].setAttribute("id",panjs.root.id+"_"+h),d[0].originalId=
h,d[0].owner=panjs.root);panjs.root[h]=e}logger.info("READY");"undefined"!=typeof onReady&&onReady()};panjs.getClassNameFromClassPath=function(a){var b=".";if(a.startsWith("http://")||a.startsWith("https://")||"/"==a[0])b="/";var c=a;a.endsWith(".html")&&(c=a.removeEnd(".html"));a=c.split(b);return c=a[a.length-1]};panjs.getNamespace=function(a){for(var b=0;b<panjs.namespaces.length;b++){var c=panjs.namespaces[b];if(c.name==a)return c}return null};panjs.getAbsoluteUrlFromClassPath=function(a){var b=
a.endsWith(".html"),c="";if(a.startsWith("http://")||"/"==a[0])c=b?a:a+".js";else if(a.contains("."))for(var d=0;d<panjs.namespaces.length;d++){var e=panjs.namespaces[d];if(a.startsWith(e.name+".")){c=a.removeEnd(".html").replace(/\./g,"/");c=c.replace(e.name,e.path);c=b?c+".html":c+".js";break}}else c=a,c=b?c+".html":c+".js";if(""==c)throw"Can't resolve "+a+": verify namespaces";return c};panjs.isAbsoluteUrl=function(a){a=a.toLowerCase();return"/"==a[0]||a.toLowerCase().startsWith("http://")||a.toLowerCase().startsWith("https://")};
panjs.transformUrl=function(a,b){"/"!=a[0]&&"http://"!=a.substring(0,7)&&"https://"!=a.substring(0,8)&&(a=b+"/"+a);return a}})();
var Tobject={classHierarchy:"Tobject",extend:function(b,a,f){var c=this.prototype||Tobject,d={};d.classHierarchy={value:c.classHierarchy+" "+a};if(8!=panjs.iever){for(var e in b)if(e.startsWith("$")){a=b[e];e=e.droite("$");logger.debug("BINDABLE => "+e+", defaultValue="+a);d["__"+e]={value:a,writable:!0,enumerable:!0};a=new Function('var key = "__'+e+'", propName="'+e+'",oldValue=this[key];newValue=arguments[0]; if (this[key] != arguments[0]){this[key] = arguments[0]; this.__OnPropChanged(propName, oldValue, newValue, this);}');var g=
new Function('var key = "__'+e+'"; return this[key]');d[e]={get:g,set:a}}else d[e]={value:b[e],writable:!0,configurable:!0,enumerable:!0};b=Object.create(c,d);e=b.constructor;if(!(e instanceof Function))throw Error("You must define a method 'constructor'");e.prototype=b;e.prototype.parentClassName=f;e._super=c;e.extend=this.extend}else{d=b.constructor;for(e in c)"constructor"!=e&&"_super"!=e&&(d.prototype[e]=c[e]);for(e in b)"constructor"!=e&&"_super"!=e&&(d.prototype[e]=b[e]);d.extend=this.extend;
d._super=c;d.prototype.parentClassName=f;d.prototype.classHierarchy=c.classHierarchy+" "+a;e=d}return e},__OnPropChanged:function(b,a,f,c){},copyOwnTo:function(b,a){Object.getOwnPropertyNames(b).forEach(function(f){console.log(f);Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(b,f))});return a},injectParam:function(b,a,f,c){if("undefined"==typeof a||null==a){if("undefined"!=typeof c)return this[b]=c,!0;if("undefined"!=typeof f&&!0==f)throw"The "+b+" argument has no default value on "+this.className;
return!1}this[b]=a;return!0}};function defineClass(b,a,f){var c=a.endsWith(".html"),d=panjs.getClassNameFromClassPath(a);if("undefined"==typeof window[d]&&(c?panjs.loader.usesComponent(a):panjs.loader.uses(a),"undefined"==typeof window[d]))return logger&&logger.error("Unable to inherit from "+a+": class is not loaded"),null;try{window[b]=window[d].extend(f,b,d)}catch(e){alert(d+" "+e)}panjs.lastDefinedClassName=b}
function uses(b){return b.endsWith(".html")?panjs.loader.usesComponent(b):panjs.loader.uses(b)}
defineClass("Tlogger","core.Tobject",{_level:null,name:"MAIN",creationDate:null,active:!0,_currentGroup:0,_tabulation:"",tab:[],constructor:function(b){this.injectParam("_level",b.level,!1,Tlogger.INFO);this.injectParam("name",b.name,!1);this.creationDate=(new Date).getTime();this.setLevel(this._level);this.active="undefined"!=typeof console;this.razTime();this.info("Init logger LEVEL=",this.getLevelName())},razTime:function(){this.creationDate=new Date},getLevelName:function(){if(this._level==Tlogger.DEBUG)return"DEBUG";
if(this._level==Tlogger.INFO)return"INFO";if(this._level==Tlogger.WARN)return"WARN";if(this._level==Tlogger.ERROR)return"ERROR"},groupStart:function(){this.active&&(this._currentGroup++,this._calcTabultation())},groupEnd:function(){this.active&&(this._currentGroup--,this._calcTabultation())},_calcTabultation:function(){this._tabulation="";for(var b=0;b<this._currentGroup;b++)this._tabulation+="\t"},_getTime:function(){return(new Date).getTime()-this.creationDate},_debug:function(){this.active&&(console.debug?
console.debug(this._getMessage("DEBUG",arguments)):console.log(this._getMessage("DEBUG",arguments)))},_info:function(){this.active&&(console.info?console.info(this._getMessage("INFO",arguments)):console.log(this._getMessage("INFO",arguments)))},_warn:function(){this.active&&(console.warn?console.warn(this._getMessage("WARN",arguments)):console.log(this._getMessage("INFO",arguments)))},_error:function(){this.active&&console.error(this._getMessage("ERROR",arguments))},_getMessage:function(b,a){for(var f=
"",c=0;c<a.length;c++)f+=a[c];c=this._getTime()+"ms("+this._currentGroup+")";100>c&&(c+=" ");1E3>c&&(c+=" ");1E4>c&&(c+=" ");1E5>c&&(c+=" ");return c+" - "+b+"\t"+this._tabulation+f},setLevel:function(b){this._level=b;this.debug=this._debug;this.info=this._info;this.warn=this._warn;this.error=this._error;b>=Tlogger.INFO&&(this.debug=function(){});b>=Tlogger.WARN&&(this.info=function(){});b>=Tlogger.ERROR&&(this.warn=function(){})}});Tlogger.DEBUG=10;Tlogger.INFO=20;Tlogger.WARN=25;Tlogger.ERROR=30;
panjs.logger=new Tlogger({level:Tlogger[panjs.logLevel],name:"main"});logger=panjs.logger;Ttracer=function(){};Ttracer.getLogger=function(b){return logger};
defineClass("Tloader","core.Tobject",{queue:[],_count:0,maxImbrications:10,loadedJs:null,loadedCss:null,_lessIsLoaded:null,randomId:"",constructor:function(b){this.loadedJs={};this.loadedCss={};this.randomId=Math.random()},lessIsLoaded:function(){null==this._lessIsLoaded&&(this._lessIsLoaded=defined(window.less,"refresh"));return this._lessIsLoaded},getClassPathDir:function(b){var a=b;b.endsWith(".js")?a=b.removeEnd(".js"):b.endsWith(".html")&&(a=b.removeEnd(".html"));return a=a.substr(0,a.lastIndexOf("."))},
getUrlWithVersion:function(b){b=!1==b.contains("?")?b+"?":b+"&";b+="v="+panjs.appVersion;"dev"==panjs.env&&(b=b+"&rid="+this.randomId);return b},loadFile:function(b){try{var a={result:!1,exception:"",status:"erreur inconnue"};logger.debug("Loadfile SYNC ",b);jQuery.support.cors=!0;var f=jQuery.ajax({url:b,method:"GET",cache:!0,async:!1,dataType:"html",processData:!1,context:this,beforeSend:function(a){a.setRequestHeader("Cache-Control","no-transform")},success:function(c,e,f){this.onLoadFileSuccess(f,
b);a={result:!0,data:c}},error:function(c,e,g){this.onLoadFileError(f,e,g,b);a={result:!1,jqXHR:f,exception:g};a.status=f&&f.status?f.status:g}})}catch(c){a={result:!1,exception:c,status:c}}return a},onLoadFileSuccess:function(b,a){},onLoadFileError:function(b,a,f,c){logger.error("Echec chargement "+c+": "+f)},usesComponent:function(b){var a=panjs.getClassNameFromClassPath(b),f=null,c=null;if(this._count>this.maxImbrications)return{result:!1,message:"Too much nested components (max: "+this.maxImbrications+
")",className:a,classPath:b,url:f,path:"?",Class:null};if("undefined"==typeof window[a]){logger.groupStart();0==this._count&&logger.info(" ************ "," USESCOMPONENT ",b," ************ ");this._count++;var c=panjs.getAbsoluteUrlFromClassPath(b),f=this.getUrlWithVersion(c),d=this.loadFile(f);if(d.result){try{var e=getXmlDocument(d.data)}catch(g){return logger.error(g),{result:!1,message:g,className:a,classPath:b,url:f,path:c}}for(var h=e.getElementsByTagName("head")[0],e=e.getElementsByTagName("body")[0],
m=[],q=[],r=c.substring(0,c.lastIndexOf("/")),k=0;k<h.childNodes.length;k++){var n=h.childNodes[k],p=n.nodeName.toLowerCase();if("script"==p)try{this.addScriptNode(n,r,a)}catch(t){return d="Error processing <"+p+"> in "+a+" => "+t,logger.error(c,d),{result:!1,message:d,className:a,classPath:b,url:f,path:c,stack:t.stack}}else"link"==p?m.push(n):"style"==p&&q.push(n)}if("undefined"==typeof window[a])return d=b+" class has not been loaded. ",panjs.lastDefinedClassName!=a&&(d+="\n"+panjs.getMessage(panjs.messages.CLASSNAME_MATCHS_FILENAME,
panjs.lastDefinedClassName,c)),logger.error(d),{result:!1,message:d,className:a,classPath:b,url:f,path:c,stack:null};for(k=0;k<m.length;k++)this.addLinkNode(m[k],r);for(k=0;k<q.length;k++)logger.debug("Load style ",b),this.addStyleNode(q[k]);if(defined(e))try{var l=getXml(e),s=window[a].prototype.parentClassName;defined(window[s].prototype.html)&&window[s].prototype.html.contains("\x3c!--CONTENT--\x3e")&&(l=window[s].prototype.html.replace("\x3c!--CONTENT--\x3e",l));l=l.replace(/<body>/gi,"").replace(/<\/body>/gi,
"");l=l.replace(/\\r/gi,"").replace(/\\n/gi,"").trim();window[a].prototype.html=l;if(8==panjs.iever){var u=$("<div>"+l+"</div>");window[a].prototype.html=u[0].innerHTML}window[a].prototype.bodyNode=e}catch(v){return{result:!1,message:v.message,className:a,classPath:b,url:f,path:c,Class:null}}panjs.setSourceInComponents&&(window[a].prototype.source=d.data);window[a].prototype.classPath=b;window[a].prototype.classPathDir=this.getClassPathDir(b);window[a].prototype.className=a;window[a].prototype.dirPath=
r;window[a].lastId=0;this._count--;0==this._count&&logger.debug(" ************ "," END USESCOMPONENT ",b," ************ ");logger.groupEnd();return{result:!0,message:"ok",className:a,classPath:b,url:f,path:c,Class:window[a]}}d="Error loading "+b+": "+d.status;logger.warn(d);this._count--;logger.groupEnd();return{result:!1,message:d,className:a,classPath:b,url:f,path:c,Class:null}}return{result:!0,message:"Already loaded",className:a,classPath:b,url:f,path:c,Class:window[a]}},uses:function(b){var a=
panjs.getClassNameFromClassPath(b),f=null,c=null;if("undefined"==typeof window[b]){logger.groupStart();0==this._count&&logger.info(" ------------ "," USES ",b," ------------ ");var c=panjs.getAbsoluteUrlFromClassPath(b),d=c.substring(0,c.lastIndexOf("/"));if(this.loadedJs[c.toLowerCase()])return!0;this._count++;logger.groupStart();var f=this.getUrlWithVersion(c),e=this.loadFile(f);e.result&&(e.data=this.processCode(e.data,a),panjs.exec(e.data),panjs.setSourceInComponents&&(window[a].prototype.source=
e.data),window[a].prototype.classPath=b,window[a].prototype.className=a,window[a].prototype.classPathDir=this.getClassPathDir(b),window[a].prototype.dirPath=d,window[b]=window[a]);this._count--;logger.groupEnd();0==this._count&&logger.debug(" ------------ "," END USES ",b," ------------ ");logger.groupEnd();return{result:!0,message:"ok",className:a,classPath:b,url:f,path:c,Class:window[a]}}return{result:!0,message:"Already loaded",className:a,classPath:b,url:f,path:c,Class:window[a]}},addLinkNode:function(b,
a){var f=panjs.transformUrl(b.getAttribute("href"),a),c=b.getAttribute("type")||"text/css",d=b.getAttribute("rel")||"stylesheet";this.loadCssFile(f,c,d)},loadCssFile:function(b,a,f){var c=!1;b=this.getUrlWithVersion(b);if(this.loadedCss[b.toLowerCase()])return c;if(0==arguments.length)throw"loadCssFile(url, type , rel): Missing url";"undefined"==typeof a&&(a="text/css");"undefined"==typeof f&&(f="stylesheet");if(document.createStyleSheet&&8==panjs.iever)document.createStyleSheet(b),c=!0;else{var d=
document.createElement("link");d.rel=f;d.type=a;d.href=b;"stylesheet/less"==f?0<panjs.iever&&8>=panjs.iever?logger.warn(panjs.getMessage(panjs.messages.LESS_IE8,panjs.iever)):this.lessIsLoaded()?(less.sheets.push(d),less.refresh(!0),logger.debug("INJECTION LESS OK"),c=!0):logger.warn(panjs.getMessage(panjs.messages.LESS_NOT_LOADED)):(document.getElementsByTagName("head")[0].appendChild(d),c=!0)}!0==c&&logger.debug("Load <link> ASYNC: "+b);this.loadedCss[b.toLowerCase()]=!0;return c},addStyle:function(b,
a){""!=b.trim()&&("undefined"==typeof a&&(a="text/css"),$('<style type="'+a+'">'+b+"</style>").appendTo("head"),"text/less"==a&&(0<panjs.iever&&8>=panjs.iever?logger.warn(panjs.getMessage(panjs.messages.LESS_IE8,panjs.iever)):this.lessIsLoaded()?(less.refresh(),logger.debug("INJECTION LESS OK")):logger.warn(panjs.getMessage(panjs.messages.LESS_NOT_LOADED))),8==panjs.iever&&"undefined"!=typeof respond&&respond.update())},addStyleNode:function(b){var a=b.getAttribute("type");null==a&&(a="text/css");
b=getText(b);this.addStyle(b,a)},processCode:function(b,a){return b.replace(/this._super/g,a+"._super")},addScriptNode:function(b,a,f){if(null==b.getAttribute("src"))a=getText(b),null!=f&&"text/x-class-definition"==b.getAttribute("type")&&(a=this.processCode(a,f)),panjs.exec(a);else if(a=panjs.transformUrl(b.getAttribute("src"),a),this.loadedJs[a.toLowerCase()])logger.debug("Le script "+a+" est d\u00e9j\u00e0 charg\u00e9");else{var c=this.loadFile(this.getUrlWithVersion(a));null!=f&&"text/x-class-definition"==
b.getAttribute("type")&&(c.data=this.processCode(c.data,f));panjs.exec(c.data);this.loadedJs[a.toLowerCase()]=1}return!0}});panjs.loader=new Tloader;
