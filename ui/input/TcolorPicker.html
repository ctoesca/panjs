<html>        
<head>
<link href="/libs/spectrum/1.7.0/spectrum.css" rel="stylesheet"/>
<script type="text/javascript" src="/libs/spectrum/1.7.0/spectrum.js"></script>
<style>

.TcolorPicker
{
	display:inline-block;
}
</style>

<script data-subtype="text/x-class-definition">
//<![CDATA[
              
defineClass("TcolorPicker", "panjs.core.display.Telement", { 

	/* PROPRIETES */
	baseElement: "div",
	localstorageKey: null,
	/* METHODES */
	constructor: function(args){
		this._super.constructor.call(this,args);

		this.localStorageKey = globals.appName+"_"+globals.env+".colorPickerSelectedColors";
	 	//this.value = localStorage.getItem(this.localstorageKey);
		
		this.pickerElem.spectrum({

	    color: this.value,
	    showPalette: true,
	    
	    /*
	    showSelectionPalette: true,
	    flat: bool,
	    showInput: bool,
	    showInitial: bool,
	    allowEmpty: bool,
	    showAlpha: bool,
	    disabled: bool,
	    showPaletteOnly: bool,
	    togglePaletteOnly: bool,
	    
	    clickoutFiresChange: bool,
	    cancelText: string,
	    chooseText: string,
	    togglePaletteMoreText: string,
	    togglePaletteLessText: string,
	    containerClassName: string,
	    replacerClassName: string,
	    preferredFormat: string,
	    maxSelectionSize: int,
	    selectionPalette: [string],*/
	    hideAfterPaletteSelect:true,
	    palette: [
        ["#000","#444","#666","#999"],
        ["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],
        ["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],
        ["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],
        ["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],
        ["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]
    	],
	    change: this._onChange.bind(this)
	});
	},
	_onChange: function(color){		
		this.dispatchEvent( new Tevent( Tevent.CHANGE, color.toHexString()));
	},
	val: function(v){
		if (arguments.length == 0){
			return this.pickerElem.val().toHexString();
		}else{
			this.pickerElem.spectrum("set", v);
		}
	}
	

});
//]]>
</script>

</head>
<body>
<input id="pickerElem" type="text" class="basic" ></input>
</body>
	
</html> 