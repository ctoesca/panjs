<html>        
<head>

<script src="/libs/bootstrap-notify/3.1.3/dist/bootstrap-notify.min.js"/>
<link href="/libs/animate/animate.css" rel="stylesheet"/>

<style type="text/css">

[data-notify="container"] {
	
	max-width: 400px;
	
}
</style>

<script data-subtype="text/x-class-definition">
//<![CDATA[

TnotifyPosition = function(){};
TnotifyPosition.TOP_LEFT = "top-left";
TnotifyPosition.TOP_RIGHT = "top-right";
TnotifyPosition.BOTTOM_LEFT = "bottom-left";
TnotifyPosition.BOTTOM_RIGHT = "bottom-right";

defineClass("Tnotify", "panjs.core.display.Telement", { 

	baseElement: "div",
	message: "",
	closehandler: null,
	defaultPosition: TnotifyPosition.TOP_RIGHT,
	position: null,
	type: 'success',
	delay: 5000,
	playSound: false,
	constructor: function(args){ 
		
		
		this._super.constructor.call(this,args);	
		
		this.audio = new Audio('/libs/sound/chat_message_notify.ogg');

		this.injectParam("message", args.message,false, this.message);	
		this.injectParam("closehandler", args.closehandler,false, null);
		this.injectParam("position", args.closehandler,false, this.defaultPosition);	
		this.injectParam("type", args.type,false, this.type);
		this.injectParam("playSound", args.playSound,false, this.playSound);	
		this.injectParam("delay", args.delay,false, this.delay);	

	},	

	show: function()
	{
		if (this.playSound)
			this.audio.play();

		$.notify( 
			{
				// options
				message: this.message
			},{
				//settings
				delay: this.delay,
				type: this.type,
				animate:{
					enter: "animated fadeInDown", 
					exit: "animated fadeOutUp" 
				},
				onClosed: this._onClose.bind(this),
				//showProgressbar: true,
				placement: {
					from: "top",
					align: "right"
				}
			}
		);
	},

	_onClose: function(e)
	{
		if (this.closehandler != null)
			this.closehandler(this);
	},
	_onHide: function()
	{
		
	},

	getCloseEvent: function(action)
	{
		var evt =  new Tevent(Tevent.CLOSE);
	},

	close: function(e, action)
	{	
	}
});


Tnotify.show = function(message, closehandler, position, type)
{
	if (arguments.length<4)
	 	var type = 'success';
	 
	var n = new Tnotify({type: type, message: message, closehandler: closehandler||null, position: position||TnotifyPosition.TOP_RIGHT});
	n.show();
	
	return n;
}
Tnotify.success = function(message, closehandler, position)
{
	var n = new Tnotify({type:'success', message: message, closehandler: closehandler||null, position: position||TnotifyPosition.TOP_RIGHT});
	n.show();
	return n;
}
Tnotify.error = function(message, closehandler, position)
{
	var n = new Tnotify({type:'danger', message: message, closehandler: closehandler||null, position: position||TnotifyPosition.TOP_RIGHT});
	n.show();
	return n;
}
//]]>
</script>

</head>
<body>		 

	 <div id="notifyElem" class="notifications"></div>

</body>
</html> 
