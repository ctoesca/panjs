<html>        
  <head>

    <script data-subtype="text/x-class-definition">
      //<![CDATA[      

      defineClass("Tusing_states1", "panjs.core.display.Telement", { 
      	
      	baseElement:"div",

        constructor: function(args){
          this._super.constructor.call(this,args);  
        }
      });
      //]]>
    </script>

  </head>
  <body>	
   
    <h1>Using states</h1>

    <p>When a view changes on user actions, model changes etc, you often have to refresh elements states on the view, manipulating DOM (el.show(), el.hide() etc, with many conditions). 
    <br/>The code can can be very verbose and difficult to maintain.</p>
    
    <p>With panjs, each component instance can be in one or more states: it's a simple 'state machine'. Elements can be shown/hidden/styled according to the component's states.</p>
    <p>Use the <code>data-include-in</code> and <code>data-exclude-from</code> attributes to specify the set of states in which a element/component is included, where:</p>
    <ul>
        <li>The <code>data-include-in</code> attribute specifies the list of states where the element appears. This attribute takes a white space delimited list of state names.</li>
        <li>The <code>data-exclude-from</code> attribute specifies the list of states where the component is hidden. This attribute takes a white space delimited list of state names.</li>
        <li>The <code>data-exclude-from</code> and <code>data-include-in</code> attributes are mutually exclusive; it is an error to define both on a single tag.</li>
        <li>CSS classes are added or removed on the component when the state changes: their names are the names of the component's states.<br/>
        <p>For example: if you want to disable buttons on a component 'TstatesComponent1' that is in state "working", you would do something like this (in LESS):</p>

     <div data-compo="panjs.ui.TcodeHighlight.html" data-language="html">&lt;style type="text/less"&gt;
.TstatesComponent1.working{  
          button{
            cursor: not-allowed;
            pointer-events: none;
            opacity: .65;
          }
} 
&lt;/style&gt;</div>
        </li>
    </ul>

     <hr/>

<h3>Create the file <code>TstatesComponent1.html</code> in "components" directory</h3>

    <div data-compo="panjs.ui.TcodeHighlight.html" data-source-classpath="components.TstatesComponent1.html" id="codeCompo1" />
    
    <h4>Notes:</h4>
    <ul>
       <li>Open the console to see changes on states.</li>
      
       <li>In this example, we use LESS by setting <code>type="text/less"</code> on the <code>style</code> element.</li>
       <li><code>.TstatesComponent1.connecting</code> CSS is activated when the component is in state <code>connecting</code></li>
       <li><code>.TstatesComponent1.disconnecting</code> CSS is activated when the component is in state <code>disconnecting</code></li>
    </ul>


    <h3>Put the component in <code>app.html</code></h3>
    <p>Modify app.html <code>&lt;body&gt;</code></p>

     <div data-compo="panjs.ui.TcodeHighlight.html">
&lt;body&gt;
  &lt;div data-compo="components.TstatesComponent1.html"&gt;&lt;/div&gt;
&lt;/body&gt;
     </div>

  

  <h3>Result</h3>

  <div data-compo="components.app10.html"/>

 <hr/>
  <h1>States API</h1>

  <h3>Methods</h3>

  <table class="table table-responsive" style="max-width: 1400px">
    <tr>
      <th style="min-width: 240px">Method</th>
      <th style="min-width: 350px">Args</th>
      <th style="min-width: 200px">Result</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>setState(mixed)</td>
      <td>
        mixed: <ul>
          <li><code>String</code> argument representing a state</li>
          <li><code>Array[] of string</code> containing states</li>
        </ul>
      </td>
      <td><code>true</code> if the component states has been changed else <code>false</code></td>
      <td>Set the component in one or more states</td>
    </tr>

     <tr>
      <td>addState(state)</td>
      <td>
          state: <code>String</code> state name.
      </td>
      <td><code>true</code> if the component states has been changed else <code>false</code></td>
      <td>Add one state on the component. If the state already exists, it will not be added.</td>
    </tr>

    <tr>
      <td>removeState(state)</td>
      <td>
          state: <code>String</code> state name.
      </td>
      <td><code>true</code> if the component states has been changed else <code>false</code></td>
      <td>Remove one state on the component. If the state doesn't exists, it will not be removed.</td>
    </tr>
    <tr>
      <td>toggleState(state [, value])</td>
      <td>
          <b>state</b>: <code>String</code> state name.
          <br/>
          <b>value</b>: <code>boolean</code>: <code>true</code> to activate the state, <code>false</code> to deactivate the state.
      </td>
      <td><code>true</code> if the component states has been changed else <code>false</code></td>
      <td></td>
    </tr>
    <tr>
      <td>toggleState(state, options)</td>
      <td>
          <b>state</b>: <code>String</code> state name.
          <br/>
          <b>options</b>: <code>string</code>, <code>number</code> or <code>object</code> : (<a href="http://api.jquery.com/show/">jquery display options</a>).
      </td>
      <td><code>true</code> if the component states has been changed else <code>false</code></td>
      <td>If the state is active, remove this state. If the state is not active, add this state.</td>
    </tr>
    <tr>
      <td>toggleState(state, value, options)</td>
      <td>
          <b>state</b>: <code>String</code> state name.
          <br/>
          <b>value</b>: <code>boolean</code>: <code>true</code> to activate the state, <code>false</code> to deactivate the state.
          <br/>
          <b>options</b>: <code>string</code>, <code>number</code> or <code>object</code> : (<a href="http://api.jquery.com/show/">jquery display options</a>).
      </td>
      <td><code>true</code> if the component states has been changed else <code>false</code></td>
      <td></td>
    </tr>

    <tr>
      <td>hasState(state)</td>
      <td>
          state: <code>String</code> state name.
      </td>
      <td><code>true</code> if the state exists<br/>
          <code>false</code> if not</td>
      <td></td>
    </tr>

  </table>

  <h3>Events</h3>

  <table class="table table-responsive" style="max-width: 1000px">
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>Tevent.STATE_CHANGED</td>
      <td>Fired when states change on the components. <code>data</code> is a object: <br/>
      <code>{<br/>
            oldStates: [state1, state2,...], <br/>
            newStates: [state1, state2,...], <br/>
            removedState: [state1, state2,...], <br/>
            addedStates: [state1, state2,...]
            <br/>
            }</code>
      </td>
    </tr>
  </table>


 <h3>Properties</h3>

  <table class="table table-responsive" style="max-width: 1000px">
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>currentState</td>
      <td><code>[state1, state2,...]</code> : current states of the component.
      </td>
    </tr>
  </table>


  </body>
</html>
