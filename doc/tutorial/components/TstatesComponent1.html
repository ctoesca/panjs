<html>        
<head> 
  <style type="text/less">
  /* disabling buttons when connection or disconnecting */
  .TstatesComponent1.connecting, .TstatesComponent1.disconnecting{  
       
            cursor: not-allowed;
            pointer-events: none;
            opacity: .65;
      
  }        
  </style>

  <script type="text/x-class-definition">
    //<![CDATA[      
    defineClass("TstatesComponent1", "core.display.Telement", { 

        baseElement: "div", 
        
        constructor: function(args){
          this._super.constructor.call(this,args);  

          //logging STATE_CHANGED events
          this.on(Tevent.STATE_CHANGED, this.onStateChanged.bind(this));

          //by default: disconnected
          this.setState(['connected']);
        },
        onStateChanged: function(e){
          logger.info(JSON.stringify( e.data) );
        },
        disconnect: function(){  
          //simulate ajax call:
          setTimeout( this.onDisconnected.bind(this), 1000);
          this.setState("disconnecting");
        },
        connect: function(){  
          //simulate ajax call:
          setTimeout( this.onConnected.bind(this), 1000);                   
          this.setState("connecting");
        },
        onConnected: function(){
          this.setState("connected");
        },
        onDisconnected: function(){
          this.setState("disconnected");       
        }
    });
    //]]>
  </script>
</head>

<body>  

    <button id="btnConnect" includeIn="disconnected connecting" class="btn btn-success" data-onclick="this.connect">
        <span includeIn="disconnected">Connect</span> 
        <span includeIn="connecting">Connecting...<i class="fa fa-cog fa-spin"/></span>         
    </button>

    <button id="btnDisconnect" includeIn="connected disconnecting" class="btn btn-danger" data-onclick="this.disconnect">       
        <span includeIn="connected">Disconnect</span> 
        <span includeIn="disconnecting">Disconnecting...<i class="fa fa-power-off fa-spin"/></span> 
    </button> 
</body>
</html> 
